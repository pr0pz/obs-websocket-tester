<!DOCTYPE html>
<html lang="en">
<head>

	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>OBS WebSocket Tester</title>
	<meta name="description" content="Test and debug your WebSocket connection to OBS Studio with this simple tool. Just connect to OBS and start testing with your own WebSocket data.">

	<link rel="icon" type="image/png" sizes="32x32"href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAEeElEQVR42q2WWWhVVxSGr7baSGrTIQ0hTUWhsVTQSsEO0Iq10EqkoYRQCvWltJT2IZp7kxuNjWkNgtYBHBARiRmNJlfjPEacHtRERVBxRB9EE5WoLz44L799XSdsj+dsrsYDP+fevdde/7/WXnufFUn1ia+SQaCgrEn+L22Ujli9tHpz/7RKYbReNsUaZDbviZUJeS3yqp6yRsmFcBbowrkk0SAyeaVMNPNTV8tXU2pFIE+ipE5karNM6TOxRh2D8B5QAgAg/83M/9sm2fy/b0h529hl5lk3koxVvQzxWzjZE/MRa4T7PDuycjyAXCC+lRRQJ5masePxJnk/JfLyZslhwUU7ahukO1PtZil5IBA3SrNwBAjoolbynOTTWyQNw8th5BAuNnbs8TC1CRfQIMUqoEazYnCzap28GyqA/ToQGlW93Cal6USeRnRnXAKiAF9LVECJXaCsPRFIzh795UhpHPIstctxRe5Fy+nZpHUwVsdtETOeIWeAogvd8yK/WJyMM9XvEoDPTs3AMP+ceVeskexehwxU+FJ6E+UJnJSGbRdbko5dDhgP4qxv9wk5r77TwaNnsvBU4MLeI1eqEyCB458iL/mwdiRCVnhEVoASkIW7FPObZvJ7BjrBl7YzxsdRSMWOgj2CzTWwlWgqqY0R3hy+fmS8hfH+6mtbkAgE/xwpqZVB1rWbjeM5LLwa1VSRoWU4T/PVTFnQKWB8I+vzLH/9rOysCzgtS+3br9oUFo6DlGZo1JMYa4s6ik/vgA9swXoacpl77Fuz1xAPRekhx7k+r1F/ZI05BbC3/suG9clifOBbc87sz9kwcsV+TeF31phTxLQ1Mj5AQAHw23cZAbfcDmWXFlJBqgJ4d1eulSzfFgxnrsdnf9U47nQ7lIsqYAKQVEHhvqcnopYGZZL5PblGvvYJPWMc7wCiBdINToHD4ADopKAa1dGoFxCwWUV/qESCiOTnmJu1NdbYe1u2R6joz/jzA3ucGXE82PTHZjTOfuW9nPclR9YK9NSUefc/xb4lKWClDFYbYX7Bc0RMZkHwKe9vwOcYDXfcfF+A2dhdschPW4XXbYg8QupijGYhofb5nuFccJSBGyHNRaHaFYEFiJoQkKG/EdNBuzZWe8VfPHIrC7u1IM2JusP8G17UTa6qhrBNF+ZbTm8gZhn41i9mxloZaE5X0PHGVwa3bz/wiZ32wUBcKF8lGfop7gjIUA9kQzx/RjB2YX1CcViR/eG8XFbLfC2ivIBWbTs2GZr6avbY1agcdlV6u+Nyefzfesk1dsU1Mt2a+9P6nkyLOhpVPX4HQwWwL69jeC6kMxIILszcIG8nM1FH9ddLvtXSzVOhLvTAQRCOh4vnHQxPhnTFJoW/+/qCMWBnCuRdrHe25XZRDgAJcBYcAi0QxIn444D+cJESuHBQm9q+P1T8QLaikqhnWh+a6hDih6Ciz6S6x6MhP6adjHc/bCxvlgFawEVKKOA62ZrD2NC+8toFOgTHVaAZ7Pb6CLvH5/8IxgtBeqp+nwDPhqWHzCbpPgAAAABJRU5ErkJggg==
	" />

</head>
<body>
<div id="wrapper">

	<section id="intro">
		<svg viewBox="0 0 396 396" xmlns="http://www.w3.org/2000/svg" id="logo"><rect fill="#fff" height="396" rx="198" width="396" id="logo-bg"/><g id="logo-inner"><path d="m266.236 207.506c.154-.646.124-1.322-.086-1.952s-.592-1.189-1.103-1.613c-3.582-3.101-6.458-6.932-8.433-11.237-1.974-4.305-3.002-8.983-3.014-13.718.01-2.912.41-5.81 1.189-8.616.234-.723.231-1.503-.01-2.225-.24-.721-.706-1.347-1.328-1.785-20.586-14.878-45.085-23.399-70.467-24.51h-1.19c-.873-.075-1.746.149-2.475.635-.73.486-1.272 1.205-1.539 2.039-2.17 7.797-6.83 14.671-13.271 19.578s-14.309 7.577-22.408 7.605c-.113-.065-.242-.099-.372-.099-.131 0-.259.034-.372.099-3.408 18.929-3.859 38.271-1.338 57.337.132.795.5 1.532 1.057 2.115s1.277.985 2.065 1.153c32.989 5.422 64.905 16.052 94.552 31.491.808.382 1.723.473 2.591.256.867-.217 1.633-.727 2.166-1.445 11.548-16.589 19.638-35.33 23.786-55.108z"/><path d="m221.938 287.125c.414-.428.723-.946.903-1.513.181-.567.228-1.167.138-1.755-.088-.606-.323-1.18-.687-1.672-.363-.493-.842-.888-1.395-1.151-21.922-10.704-45.094-18.638-68.98-23.618-.647-.153-1.323-.123-1.954.087-.63.209-1.189.591-1.614 1.102-.433.472-.731 1.053-.862 1.68s-.09 1.278.118 1.885c2.278 6.761 5.01 13.361 8.177 19.756 6.46 12.324 14.562 23.716 24.084 33.867.592.643 1.384 1.067 2.249 1.202.864.135 1.748-.027 2.508-.459 12.928-9.167 25.383-18.984 37.315-29.411z"/><path d="m113.113 229.192c.579.012 1.152-.116 1.67-.375s.965-.64 1.303-1.11c.71-.824 1.081-1.885 1.041-2.971-2.087-19.84-1.084-39.883 2.973-59.417.091-.158.14-.337.14-.519 0-.183-.049-.362-.14-.52-5.037-3.915-9.022-9.019-11.596-14.854-.299-.785-.866-1.438-1.6-1.845-.735-.408-1.589-.544-2.414-.384-31.3504 5.63-60.411 20.174-83.6984 41.889-.6333.634-1.0048 1.482-1.0406 2.377v6.09c.0283 11.88 1.2737 23.726 3.7166 35.353.0827.491.2719.959.5544 1.369.2825.411.6514.754 1.0809 1.008.4377.221.9216.337 1.4124.337.4907 0 .9746-.116 1.4123-.337 27.9609-6.067 56.6448-8.118 85.1854-6.091z"/><path d="m156.671 330.351c.559-.193 1.057-.526 1.448-.969.391-.442.661-.979.782-1.556.141-.565.148-1.155.019-1.723-.13-.567-.39-1.097-.762-1.545-8.72-10.066-16.207-21.137-22.3-32.976-5.862-11.637-10.4-23.894-13.528-36.542-.183-.752-.597-1.428-1.183-1.934s-1.317-.817-2.088-.888c-28.3474-2.542-56.9164-.79-84.7394 5.199-.5308.133-1.0287.373-1.4634.705-.4346.332-.7966.749-1.064 1.226-.2238.463-.3401.971-.3401 1.486 0 .514.1163 1.022.3401 1.485 12.61 31.841 34.1325 59.379 61.9936 79.321.7313.189 1.4986.189 2.23 0 20.7372-.043 41.2932-3.869 60.6552-11.289z"/><path d="m300.877 212.855c-.434-.583-1.042-1.013-1.737-1.226-.696-.214-1.441-.201-2.128.038-1.998.553-4.036.95-6.095 1.188-.772.071-1.502.381-2.088.887-.587.506-1 1.183-1.183 1.935-8.622 39.512-31.665 79.47-85.482 116.457-.872.71-1.453 1.714-1.636 2.822.006 1.149.429 2.258 1.19 3.12 12.592 11.276 25.847 21.792 39.693 31.49.479.26 1.016.397 1.561.397.546 0 1.082-.137 1.561-.397 38.32-10.418 72.065-33.314 95.889-65.061.309-.396.534-.85.661-1.335.128-.485.156-.991.083-1.487-5.82-32.499-19.668-63.031-40.289-88.828z"/><path d="m104.193 124.621c.681-.104 1.32-.396 1.845-.841.525-.446.916-1.029 1.128-1.684 2.337-6.626 6.515-12.45 12.044-16.791 5.528-4.34 12.18-7.0177 19.176-7.7187.264-.0144.518-.1067.73-.2654.212-.1586.372-.3764.46-.6258 11.401-25.4897 26.422-49.2033 44.599-70.4087.423-.5831.651-1.285.651-2.0053s-.228-1.4221-.651-2.0053c-.188-.6168-.534-1.174-1.003-1.6168s-1.046-.7559-1.673-.9084c-35.601 3.3367-69.378 17.2861-96.9471 40.0385-27.5695 22.7524-47.6599 53.2579-57.6647 87.5589-.2344.723-.231 1.503.0098 2.225.2407.721.7061 1.347 1.3281 1.785.6066.436 1.3346.67 2.0814.67.7467 0 1.4747-.234 2.0813-.67 21.8893-13.652 46.3127-22.746 71.8052-26.737z"/><path d="m179.564 347.284c-.606-.436-1.334-.67-2.081-.67s-1.475.234-2.081.67c-11.28 5.205-23.028 9.333-35.085 12.329-.772.225-1.451.694-1.933 1.336-.483.643-.743 1.425-.743 2.229 0 .803.26 1.585.743 2.228.482.643 1.161 1.112 1.933 1.337 18.522 6.316 37.962 9.528 57.533 9.506h4.46c.755-.041 1.481-.302 2.088-.75.608-.449 1.071-1.066 1.331-1.775.235-.724.231-1.503-.009-2.225-.241-.721-.707-1.347-1.329-1.786-7.73-6.981-16.204-14.26-24.827-22.429z"/><path d="m298.2 145.119c.025.699.248 1.377.643 1.955.395.579.945 1.034 1.587 1.313 5.948 2.615 11.011 6.897 14.573 12.328s5.471 11.778 5.496 18.272c.032 5.149-1.139 10.235-3.419 14.854-.435.606-.67 1.333-.67 2.079s.235 1.474.67 2.08c16.354 20.437 29.03 43.557 37.464 68.329.223.732.676 1.372 1.292 1.827s1.361.699 2.127.698c.739.071 1.479-.111 2.1-.516.622-.404 1.087-1.008 1.319-1.712 9.554-21.634 14.611-44.981 14.867-68.626.071-30.716-7.802-60.929-22.858-87.709-15.055-26.7807-36.781-49.2193-63.071-65.1403-.621-.3969-1.343-.6077-2.081-.6077s-1.46.2108-2.081.6077c-.593.429-1.039 1.0296-1.278 1.7204s-.26 1.4385-.06 2.1416c8.081 31.4273 12.569 63.6683 13.38 96.1063z"/><path d="m162.319 99.6664c-.344.7896-.414 1.6726-.198 2.5066.215.835.704 1.573 1.388 2.098 5.101 3.554 9.198 8.364 11.893 13.963.388.799 1.06 1.424 1.885 1.754.825.329 1.743.34 2.575.029h3.122c30.541 1.202 60.014 11.553 84.591 29.708.592.402 1.291.617 2.007.617.715 0 1.415-.215 2.007-.617l2.081-.891c.665-.29 1.23-.768 1.626-1.375.397-.607.606-1.317.604-2.042-1.249-38.765-7.495-77.2075-18.583-114.3768-.204-.646-.596-1.2169-1.125-1.6401-.53-.4232-1.173-.6796-1.849-.7366-10.674-3.6364-21.678-6.2234-32.855-7.7241-.578-.0715-1.164-.0006-1.708.2065-.545.2071-1.03.5442-1.414.9818-22.343 22.9969-41.222 49.1161-56.047 77.5387z"/></g></svg>
		<h1>OBS WebSocket Tester</h1>
	</section>

	<section id="connect-form-wrapper" class="block">
		<div class="block-header">Connection Information</div>
		<form id="connect-form" action="#" class="block-body">
			<div class="flex">
				<div class="form-wrapper">
					<label for="address" class="form-label">Address</label>
					<input type="text" id="address" placeholder="localhost:4455" class="form-control" value="localhost:4455">
				</div>

				<div class="form-wrapper">
					<label for="password" class="form-label">Password</label>
					<input type="password" id="password" class="form-control">
				</div>
			</div>

			<div class="form-wrapper form-check hidden">
				<label for="subscribe-events" class="form-check-label">Subscribe to Events</label>
				<input type="checkbox" id="subscribe-events" class="form-check-input">
			</div>

			<div id="event-subscriptions-wrapper" class="form-wrapper form-check hidden">
				<select id="event-subscriptions" class="form-control form-select"></select>
			</div>

			<button id="button-connect" class="btn btn-primary">Connect</button>
			<button id="button-disconnect" class="btn btn-danger hidden">Disconnect</button>


		</form>
		<div class="block-footer">
			<div id="status" class="status">Not connected</div>
		</div>
	</section>

	<section id="request-form-wrapper" class="block hidden">
		<div class="block-header">Request Information</div>
		<div class="block-body">
			<form id="request-form" action="#">
				<div class="form-wrapper">
					<label for="request-type" class="form-label">Select a request type</label>
					<div id="request-description" class="form-text"></div>
					<select id="request-type" class="form-select" required aria-describedby="request-description"></select>
				</div>

				<div id="request-fields" class="form-wrapper"></div>
				
				<input type="submit" id="button-sendrequest" class="btn btn-primary" value="Send Request" disabled />
			</form>
		</div>
		<div class="block-footer">
			<pre id="request-sent">Nothing sent yet ...</pre>
		</div>
	</section>

	<section id="response-wrapper" class="block hidden">
		<div class="block-header">OBS Response</div>
		<div class="block-body">
			<pre id="response">Nothing yet ...</pre>
		</div>
	</section>

	<footer>
		Built by <a href="https://propz.de" target="_blank" rel="noopener">propz</a> - Check out <a href="https://obsproject.com/" target="_blank" rel="noopener">OBS Studio</a> + <a href="https://github.com/obs-websocket-community-projects/obs-websocket-js" target="_blank" rel="noopener">obs-websocket-js</a>
	</footer>

</div>

<style>
* {
	margin:0;
	padding:0;
	box-sizing:border-box
}

:root {
	--bg-body: #191b26;
	--bg-block: #2c2e35;
	--bg-block-header: #383a41;
	--bg-input: #25272d;

	--color-body: #e1e0e1;
	--color-headings: #fffeff;
	--color-primary: #256eff;
	--color-secondary: #72a2ff;
	--color-tertiary: #444b6d;
	--color-link: var(--color-secondary);
	--color-intro: #626c9d;

	--color-red: #e2274f;
	--color-red-dark: #bd193c;
	--color-green: #00e000;
	--color-green-dark: #00a800;

	--border-color: var(--color-tertiary);
	--border-radius: .5rem;

	--padding-block: 2rem;
	--padding-field: 1.15rem;
}

html {
	font-size: 62.5%;
	height: 100%;
	background: var(--bg-body);
}

body {
	min-height: 100%;
	padding:5vh 5%;
	background: var(--bg-body);
	color: var(--color-body);
	font-size: 2rem;
	line-height: 1.5;
	font-family: 'Open Sans', Helvetica, Arial, sans-serif;
}

	/* General */
	#logo-inner {
		fill: var(--color-primary);
	}

	h1,h2,h3,h4,h5,h6 {
		line-height: 1.2;
		margin-bottom: var(--padding-block);
		color: var(--color-headings);
	}

	p {
		margin: 0 0 1rem;
	}

	button,
	input[type="submit"] {
		cursor: pointer;
	}

	a {
		color: var( --color-link );
	}
		a:hover {
			text-decoration: none;
		}

	.flex {
		display: flex;
		gap: var(--padding-block);
	}

	pre {
		tab-size:4rem;
		font-family: monospace;
		color: var(--color-secondary);
		white-space: pre-wrap;
	}

	footer {
		font-size: 80%;
		color: var(--color-intro);
	}

	#wrapper {
		max-width:1280px;
		margin:0 auto
	}

	#intro {
		margin-bottom: calc( 2 * var(--padding-block) );
		color: var(--color-intro);
	}

		#intro svg {
			width: 10rem;
			margin-bottom: var(--padding-block);
			fill: #fff;
		}

/* Block */
.block {
	background: var(--bg-block);
	background-clip: border-box;
	border: 1px solid var(--border-color);
	border-radius: var(--border-radius);
	margin-bottom: calc( var(--padding-block) * 2 );
}

	.block-header {
		background: var(--bg-block-header);
		border-radius: var(--border-radius) var(--border-radius) 0 0;
		padding: calc( var(--padding-block) / 2 ) var(--padding-block);
		border-bottom: 1px solid var(--border-color);
		font-size: 120%;
		font-weight: bold;
	}

	.block-body {
		padding: calc( var(--padding-block) * 2 ) var(--padding-block);
	}

/* Buttons */
.btn {
	display: inline-block;
	padding: calc( var(--padding-block) / 2 ) var(--padding-block);
	text-align: center;
	border: 0;
	border-radius: 4rem;
	background: var(--color-primary);
}

	.btn:hover {
		background: var(--color-secondary);
	}

	.btn:disabled,
	.btn.disabled {
		pointer-events: none;
		opacity: .25;
	}

	.btn-danger{background:var(--color-red)}
	.btn-danger:hover{background:var(--color-red-dark)}

/* Request fields + form */
#request-fields{
	padding: var(--padding-block);
	border-radius: var(--border-radius);
	border: 1px dashed rgba(114, 162, 255, 0.75);
}

	#request-fields:empty{
		padding:0;
		border:0
	}

	#request-fields h3 {
		margin-bottom: calc( var(--padding-block) * 2 );
	}

		#request-fields > .form-wrapper:last-child {
			margin-bottom: calc( var(--padding-block) / 2 )
		}

		#request-fields .form-wrapper {
			margin-bottom: calc( var(--padding-block) * 2 );
		}

		#request-fields .form-control {
			border-radius:0;
		}

	#request-sent {
		background: var(--bg-input);
		padding: var(--padding-block);
	}

	.form-wrapper {
		margin-bottom: 2rem;
		width: 100%;
		position: relative;
	}

	input, button, select, optgroup, textarea {
		margin: 0;
		font-family: inherit;
		font-size: inherit;
		line-height: inherit;
		transition: all .3s;
		color: inherit;
	}

	.form-label,
	.form-text {
		display: inline-block;
		font-size: 80%;
		background: var(--color-tertiary);
		padding: .3rem var(--padding-field);
		float: left;
	}

		.form-text {
			background: rgba(255, 255, 255, 0.1);
			background: var(--bg-body);
			color: rgba(255, 255, 255, 0.7);
		}

		.form-text:empty{padding:0}

	.form-control,
	.form-select {
		position: relative;
		z-index: 1;
		display: block;
		width: 100%;
		padding: var(--padding-field);
		-webkit-appearance: none;
		-moz-appearance: none;
		appearance: none;
		word-wrap: break-word;
		background: var(--bg-input);
		border: 1px solid var(--border-color);
	}

		.form-control:focus,
		.form-select:focus {
			background: var(--bg-body);
			outline: 0;
			border-color: var(--color-tertiary);
		}

	.form-check {
		min-height: 1.5rem;
		padding-left: var(--padding-field);
		margin-bottom: var(--padding-block);
	}

		.form-check-input {
			margin-left: calc( var(--padding-field) * -1 );
			float: left;
			border-radius: 0.25em;
			flex-shrink: 0;
			width: 1em;
			height: 1em;
			margin-top: 0.25em;
			margin-right: 1rem;
			vertical-align: top;
			-webkit-appearance: none;
			-moz-appearance: none;
			appearance: none;
			background-repeat: no-repeat;
			background-position: center;
			background-size: contain;
			border: .3rem solid var(--color-secondary);
		}

			.form-check-input:checked {
				background-color: var(--color-secondary);
				background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 20 20'%3e%3cpath fill='none' stroke='%23fff' stroke-linecap='round' stroke-linejoin='round' stroke-width='3' d='m6 10 3 3 6-6'/%3e%3c/svg%3e");
			}

/* Status */
.status {
	--status-bg: var(--color-tertiary);
	--status-color: var(--color-secondary);
	padding: var(--padding-block);
	color: var(--status-color);
	background-color: var(--status-bg);
	border-left: .5rem solid var(--status-color);
	border-radius: var(--border-radius);
	border-top-left-radius: 0;
	border-top-right-radius: 0;
}

	.status-success {
		--status-color: var(--color-green);
		--status-bg: rgb(10 255 57 / 15%);
	}

	.status-error {
		--status-color: var(--color-red);
		--status-bg: rgb( 226 39 79 / 20% );
}

.hidden{display:none}
</style>

<script>/** obs-websocket-js (25KB) - version: 5.0.4 - https://cdn.jsdelivr.net/npm/obs-websocket-js@5.0.4/dist/obs-ws.min.js */
var OBSWebSocket=function(){function e(){return e=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},e.apply(this,arguments)}function t(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,r(e,t)}function n(e){return n=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},n(e)}function r(e,t){return r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},r(e,t)}function o(e,t,n){return o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}()?Reflect.construct.bind():function(e,t,n){var o=[null];o.push.apply(o,t);var i=new(Function.bind.apply(e,o));return n&&r(i,n.prototype),i},o.apply(null,arguments)}function i(e){var t="function"==typeof Map?new Map:void 0;return i=function(e){if(null===e||-1===Function.toString.call(e).indexOf("[native code]"))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,i)}function i(){return o(e,arguments,n(this).constructor)}return i.prototype=Object.create(e.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),r(i,e)},i(e)}var s="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function c(e){var t={exports:{}};return e(t,t.exports),t.exports}var a=1e3,u=60*a,f=60*u,l=24*f,d=function(e,t){t=t||{};var n=typeof e;if("string"===n&&e.length>0)return function(e){if(!((e=String(e)).length>100)){var t=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(t){var n=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*n;case"weeks":case"week":case"w":return 6048e5*n;case"days":case"day":case"d":return n*l;case"hours":case"hour":case"hrs":case"hr":case"h":return n*f;case"minutes":case"minute":case"mins":case"min":case"m":return n*u;case"seconds":case"second":case"secs":case"sec":case"s":return n*a;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n;default:return}}}}(e);if("number"===n&&isFinite(e))return t.long?function(e){var t=Math.abs(e);return t>=l?h(e,t,l,"day"):t>=f?h(e,t,f,"hour"):t>=u?h(e,t,u,"minute"):t>=a?h(e,t,a,"second"):e+" ms"}(e):function(e){var t=Math.abs(e);return t>=l?Math.round(e/l)+"d":t>=f?Math.round(e/f)+"h":t>=u?Math.round(e/u)+"m":t>=a?Math.round(e/a)+"s":e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))};function h(e,t,n,r){var o=t>=1.5*n;return Math.round(e/n)+" "+r+(o?"s":"")}var p=c(function(e,t){t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const n="color: "+this.color;t.splice(1,0,n,"color: inherit");let r=0,o=0;t[0].replace(/%[a-zA-Z%]/g,e=>{"%%"!==e&&(r++,"%c"===e&&(o=r))}),t.splice(o,0,n)},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(e){}},t.load=function(){let e;try{e=t.storage.getItem("debug")}catch(e){}return!e&&"undefined"!=typeof process&&"env"in process&&(e=process.env.DEBUG),e},t.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type&&!window.process.__nwjs)||("undefined"==typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},t.storage=function(){try{return localStorage}catch(e){}}(),t.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.log=console.debug||console.log||(()=>{}),e.exports=function(e){function t(e){let r,o,i,s=null;function c(...e){if(!c.enabled)return;const n=c,o=Number(new Date);n.diff=o-(r||o),n.prev=r,n.curr=o,r=o,e[0]=t.coerce(e[0]),"string"!=typeof e[0]&&e.unshift("%O");let i=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,(r,o)=>{if("%%"===r)return"%";i++;const s=t.formatters[o];return"function"==typeof s&&(r=s.call(n,e[i]),e.splice(i,1),i--),r}),t.formatArgs.call(n,e),(n.log||t.log).apply(n,e)}return c.namespace=e,c.useColors=t.useColors(),c.color=t.selectColor(e),c.extend=n,c.destroy=t.destroy,Object.defineProperty(c,"enabled",{enumerable:!0,configurable:!1,get:()=>null!==s?s:(o!==t.namespaces&&(o=t.namespaces,i=t.enabled(e)),i),set:e=>{s=e}}),"function"==typeof t.init&&t.init(c),c}function n(e,n){const r=t(this.namespace+(void 0===n?":":n)+e);return r.log=this.log,r}function r(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return t.debug=t,t.default=t,t.coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){const e=[...t.names.map(r),...t.skips.map(r).map(e=>"-"+e)].join(",");return t.enable(""),e},t.enable=function(e){let n;t.save(e),t.namespaces=e,t.names=[],t.skips=[];const r=("string"==typeof e?e:"").split(/[\s,]+/),o=r.length;for(n=0;n<o;n++)r[n]&&("-"===(e=r[n].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.slice(1)+"$")):t.names.push(new RegExp("^"+e+"$")))},t.enabled=function(e){if("*"===e[e.length-1])return!0;let n,r;for(n=0,r=t.skips.length;n<r;n++)if(t.skips[n].test(e))return!1;for(n=0,r=t.names.length;n<r;n++)if(t.names[n].test(e))return!0;return!1},t.humanize=d,t.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(e).forEach(n=>{t[n]=e[n]}),t.names=[],t.skips=[],t.formatters={},t.selectColor=function(e){let n=0;for(let t=0;t<e.length;t++)n=(n<<5)-n+e.charCodeAt(t),n|=0;return t.colors[Math.abs(n)%t.colors.length]},t.enable(t.load()),t}(t);const{formatters:n}=e.exports;n.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}}),v=c(function(e){var t=Object.prototype.hasOwnProperty,n="~";function r(){}function o(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function i(e,t,r,i,s){if("function"!=typeof r)throw new TypeError("The listener must be a function");var c=new o(r,i||e,s),a=n?n+t:t;return e._events[a]?e._events[a].fn?e._events[a]=[e._events[a],c]:e._events[a].push(c):(e._events[a]=c,e._eventsCount++),e}function s(e,t){0==--e._eventsCount?e._events=new r:delete e._events[t]}function c(){this._events=new r,this._eventsCount=0}Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(n=!1)),c.prototype.eventNames=function(){var e,r,o=[];if(0===this._eventsCount)return o;for(r in e=this._events)t.call(e,r)&&o.push(n?r.slice(1):r);return Object.getOwnPropertySymbols?o.concat(Object.getOwnPropertySymbols(e)):o},c.prototype.listeners=function(e){var t=this._events[n?n+e:e];if(!t)return[];if(t.fn)return[t.fn];for(var r=0,o=t.length,i=new Array(o);r<o;r++)i[r]=t[r].fn;return i},c.prototype.listenerCount=function(e){var t=this._events[n?n+e:e];return t?t.fn?1:t.length:0},c.prototype.emit=function(e,t,r,o,i,s){var c=n?n+e:e;if(!this._events[c])return!1;var a,u,f=this._events[c],l=arguments.length;if(f.fn){switch(f.once&&this.removeListener(e,f.fn,void 0,!0),l){case 1:return f.fn.call(f.context),!0;case 2:return f.fn.call(f.context,t),!0;case 3:return f.fn.call(f.context,t,r),!0;case 4:return f.fn.call(f.context,t,r,o),!0;case 5:return f.fn.call(f.context,t,r,o,i),!0;case 6:return f.fn.call(f.context,t,r,o,i,s),!0}for(u=1,a=new Array(l-1);u<l;u++)a[u-1]=arguments[u];f.fn.apply(f.context,a)}else{var d,h=f.length;for(u=0;u<h;u++)switch(f[u].once&&this.removeListener(e,f[u].fn,void 0,!0),l){case 1:f[u].fn.call(f[u].context);break;case 2:f[u].fn.call(f[u].context,t);break;case 3:f[u].fn.call(f[u].context,t,r);break;case 4:f[u].fn.call(f[u].context,t,r,o);break;default:if(!a)for(d=1,a=new Array(l-1);d<l;d++)a[d-1]=arguments[d];f[u].fn.apply(f[u].context,a)}}return!0},c.prototype.on=function(e,t,n){return i(this,e,t,n,!1)},c.prototype.once=function(e,t,n){return i(this,e,t,n,!0)},c.prototype.removeListener=function(e,t,r,o){var i=n?n+e:e;if(!this._events[i])return this;if(!t)return s(this,i),this;var c=this._events[i];if(c.fn)c.fn!==t||o&&!c.once||r&&c.context!==r||s(this,i);else{for(var a=0,u=[],f=c.length;a<f;a++)(c[a].fn!==t||o&&!c[a].once||r&&c[a].context!==r)&&u.push(c[a]);u.length?this._events[i]=1===u.length?u[0]:u:s(this,i)}return this},c.prototype.removeAllListeners=function(e){var t;return e?this._events[t=n?n+e:e]&&s(this,t):(this._events=new r,this._eventsCount=0),this},c.prototype.off=c.prototype.removeListener,c.prototype.addListener=c.prototype.on,c.prefixed=n,c.EventEmitter=c,e.exports=c}),y=null;"undefined"!=typeof WebSocket?y=WebSocket:"undefined"!=typeof MozWebSocket?y=MozWebSocket:"undefined"!=typeof global?y=global.WebSocket||global.MozWebSocket:"undefined"!=typeof window?y=window.WebSocket||window.MozWebSocket:"undefined"!=typeof self&&(y=self.WebSocket||self.MozWebSocket);var m,g,C,w=y;!function(e){e[e.Hello=0]="Hello",e[e.Identify=1]="Identify",e[e.Identified=2]="Identified",e[e.Reidentify=3]="Reidentify",e[e.Event=5]="Event",e[e.Request=6]="Request",e[e.RequestResponse=7]="RequestResponse",e[e.RequestBatch=8]="RequestBatch",e[e.RequestBatchResponse=9]="RequestBatchResponse"}(m||(m={})),function(e){e[e.None=0]="None",e[e.General=1]="General",e[e.Config=2]="Config",e[e.Scenes=4]="Scenes",e[e.Inputs=8]="Inputs",e[e.Transitions=16]="Transitions",e[e.Filters=32]="Filters",e[e.Outputs=64]="Outputs",e[e.SceneItems=128]="SceneItems",e[e.MediaInputs=256]="MediaInputs",e[e.Vendors=512]="Vendors",e[e.Ui=1024]="Ui",e[e.All=2047]="All",e[e.InputVolumeMeters=65536]="InputVolumeMeters",e[e.InputActiveStateChanged=131072]="InputActiveStateChanged",e[e.InputShowStateChanged=262144]="InputShowStateChanged",e[e.SceneItemTransformChanged=524288]="SceneItemTransformChanged"}(g||(g={})),function(e){e[e.None=-1]="None",e[e.SerialRealtime=0]="SerialRealtime",e[e.SerialFrame=1]="SerialFrame",e[e.Parallel=2]="Parallel"}(C||(C={}));var b={__proto__:null,default:{}},_=c(function(e,t){var n;e.exports=(n=n||function(e,t){var n;if("undefined"!=typeof window&&window.crypto&&(n=window.crypto),"undefined"!=typeof self&&self.crypto&&(n=self.crypto),"undefined"!=typeof globalThis&&globalThis.crypto&&(n=globalThis.crypto),!n&&"undefined"!=typeof window&&window.msCrypto&&(n=window.msCrypto),!n&&void 0!==s&&s.crypto&&(n=s.crypto),!n)try{n=b}catch(e){}var r=function(){if(n){if("function"==typeof n.getRandomValues)try{return n.getRandomValues(new Uint32Array(1))[0]}catch(e){}if("function"==typeof n.randomBytes)try{return n.randomBytes(4).readInt32LE()}catch(e){}}throw new Error("Native crypto module could not be used to get secure random number.")},o=Object.create||function(){function e(){}return function(t){var n;return e.prototype=t,n=new e,e.prototype=null,n}}(),i={},c=i.lib={},a=c.Base={extend:function(e){var t=o(this);return e&&t.mixIn(e),t.hasOwnProperty("init")&&this.init!==t.init||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},u=c.WordArray=a.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:4*e.length},toString:function(e){return(e||l).stringify(this)},concat:function(e){var t=this.words,n=e.words,r=this.sigBytes,o=e.sigBytes;if(this.clamp(),r%4)for(var i=0;i<o;i++)t[r+i>>>2]|=(n[i>>>2]>>>24-i%4*8&255)<<24-(r+i)%4*8;else for(var s=0;s<o;s+=4)t[r+s>>>2]=n[s>>>2];return this.sigBytes+=o,this},clamp:function(){var t=this.words,n=this.sigBytes;t[n>>>2]&=4294967295<<32-n%4*8,t.length=e.ceil(n/4)},clone:function(){var e=a.clone.call(this);return e.words=this.words.slice(0),e},random:function(e){for(var t=[],n=0;n<e;n+=4)t.push(r());return new u.init(t,e)}}),f=i.enc={},l=f.Hex={stringify:function(e){for(var t=e.words,n=e.sigBytes,r=[],o=0;o<n;o++){var i=t[o>>>2]>>>24-o%4*8&255;r.push((i>>>4).toString(16)),r.push((15&i).toString(16))}return r.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r+=2)n[r>>>3]|=parseInt(e.substr(r,2),16)<<24-r%8*4;return new u.init(n,t/2)}},d=f.Latin1={stringify:function(e){for(var t=e.words,n=e.sigBytes,r=[],o=0;o<n;o++)r.push(String.fromCharCode(t[o>>>2]>>>24-o%4*8&255));return r.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r++)n[r>>>2]|=(255&e.charCodeAt(r))<<24-r%4*8;return new u.init(n,t)}},h=f.Utf8={stringify:function(e){try{return decodeURIComponent(escape(d.stringify(e)))}catch(e){throw new Error("Malformed UTF-8 data")}},parse:function(e){return d.parse(unescape(encodeURIComponent(e)))}},p=c.BufferedBlockAlgorithm=a.extend({reset:function(){this._data=new u.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=h.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var n,r=this._data,o=r.words,i=r.sigBytes,s=this.blockSize,c=i/(4*s),a=(c=t?e.ceil(c):e.max((0|c)-this._minBufferSize,0))*s,f=e.min(4*a,i);if(a){for(var l=0;l<a;l+=s)this._doProcessBlock(o,l);n=o.splice(0,a),r.sigBytes-=f}return new u.init(n,f)},clone:function(){var e=a.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0});c.Hasher=p.extend({cfg:a.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){p.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,n){return new e.init(n).finalize(t)}},_createHmacHelper:function(e){return function(t,n){return new v.HMAC.init(e,n).finalize(t)}}});var v=i.algo={};return i}(Math),n)}),F=c(function(e,t){var n;e.exports=(n=_,function(e){var t=n,r=t.lib,o=r.WordArray,i=r.Hasher,s=t.algo,c=[],a=[];!function(){function t(t){for(var n=e.sqrt(t),r=2;r<=n;r++)if(!(t%r))return!1;return!0}function n(e){return 4294967296*(e-(0|e))|0}for(var r=2,o=0;o<64;)t(r)&&(o<8&&(c[o]=n(e.pow(r,.5))),a[o]=n(e.pow(r,1/3)),o++),r++}();var u=[],f=s.SHA256=i.extend({_doReset:function(){this._hash=new o.init(c.slice(0))},_doProcessBlock:function(e,t){for(var n=this._hash.words,r=n[0],o=n[1],i=n[2],s=n[3],c=n[4],f=n[5],l=n[6],d=n[7],h=0;h<64;h++){if(h<16)u[h]=0|e[t+h];else{var p=u[h-15],v=u[h-2];u[h]=((p<<25|p>>>7)^(p<<14|p>>>18)^p>>>3)+u[h-7]+((v<<15|v>>>17)^(v<<13|v>>>19)^v>>>10)+u[h-16]}var y=r&o^r&i^o&i,m=d+((c<<26|c>>>6)^(c<<21|c>>>11)^(c<<7|c>>>25))+(c&f^~c&l)+a[h]+u[h];d=l,l=f,f=c,c=s+m|0,s=i,i=o,o=r,r=m+(((r<<30|r>>>2)^(r<<19|r>>>13)^(r<<10|r>>>22))+y)|0}n[0]=n[0]+r|0,n[1]=n[1]+o|0,n[2]=n[2]+i|0,n[3]=n[3]+s|0,n[4]=n[4]+c|0,n[5]=n[5]+f|0,n[6]=n[6]+l|0,n[7]=n[7]+d|0},_doFinalize:function(){var t=this._data,n=t.words,r=8*this._nDataBytes,o=8*t.sigBytes;return n[o>>>5]|=128<<24-o%32,n[14+(o+64>>>9<<4)]=e.floor(r/4294967296),n[15+(o+64>>>9<<4)]=r,t.sigBytes=4*n.length,this._process(),this._hash},clone:function(){var e=i.clone.call(this);return e._hash=this._hash.clone(),e}});t.SHA256=i._createHelper(f),t.HmacSHA256=i._createHmacHelper(f)}(Math),n.SHA256)}),P=c(function(e,t){var n,r;e.exports=(r=(n=_).lib.WordArray,n.enc.Base64={stringify:function(e){var t=e.words,n=e.sigBytes,r=this._map;e.clamp();for(var o=[],i=0;i<n;i+=3)for(var s=(t[i>>>2]>>>24-i%4*8&255)<<16|(t[i+1>>>2]>>>24-(i+1)%4*8&255)<<8|t[i+2>>>2]>>>24-(i+2)%4*8&255,c=0;c<4&&i+.75*c<n;c++)o.push(r.charAt(s>>>6*(3-c)&63));var a=r.charAt(64);if(a)for(;o.length%4;)o.push(a);return o.join("")},parse:function(e){var t=e.length,n=this._map,o=this._reverseMap;if(!o){o=this._reverseMap=[];for(var i=0;i<n.length;i++)o[n.charCodeAt(i)]=i}var s=n.charAt(64);if(s){var c=e.indexOf(s);-1!==c&&(t=c)}return function(e,t,n){for(var o=[],i=0,s=0;s<t;s++)if(s%4){var c=n[e.charCodeAt(s-1)]<<s%4*2,a=n[e.charCodeAt(s)]>>>6-s%4*2;o[i>>>2]|=(c|a)<<24-i%4*8,i++}return r.create(o,i)}(e,t,o)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},n.enc.Base64)}),S=["authentication","rpcVersion"];function k(e,t){try{var n=e()}catch(e){return t(e)}return n&&n.then?n.then(void 0,t):n}var x=p("obs-websocket-js"),O=/*#__PURE__*/function(e){function n(t,n){var r;return(r=e.call(this,n)||this).code=void 0,r.code=t,r}return t(n,e),n}(/*#__PURE__*/i(Error)),j=/*#__PURE__*/function(n){function r(){for(var e,t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];return(e=n.call.apply(n,[this].concat(r))||this)._identified=!1,e.internalListeners=new v,e.socket=void 0,e}t(r,n),r.generateMessageId=function(){return String(r.requestCounter++)};var o,i,s=r.prototype;return s.connect=function(e,t,n){void 0===e&&(e="ws://127.0.0.1:4455"),void 0===n&&(n={});try{var r=function(){return k(function(){var r=o.internalEventPromise("ConnectionClosed"),i=o.internalEventPromise("ConnectionError");return Promise.resolve(Promise.race([function(){try{return Promise.resolve(o.createConnection(e)).then(function(e){return o.emit("Hello",e),o.identify(e,t,n)})}catch(e){return Promise.reject(e)}}(),new Promise(function(e,t){i.then(function(e){e.message&&t(e)}),r.then(function(e){t(e)})})]))},function(e){return Promise.resolve(o.disconnect()).then(function(){throw e})})},o=this,i=function(){if(o.socket)return Promise.resolve(o.disconnect()).then(function(){})}();return Promise.resolve(i&&i.then?i.then(r):r())}catch(e){return Promise.reject(e)}},s.disconnect=function(){try{var e=this;if(!e.socket||e.socket.readyState===w.CLOSED)return Promise.resolve();var t=e.internalEventPromise("ConnectionClosed");return e.socket.close(),Promise.resolve(t).then(function(){})}catch(e){return Promise.reject(e)}},s.reidentify=function(e){try{var t=this.internalEventPromise("op:"+m.Identified);return Promise.resolve(this.message(m.Reidentify,e)).then(function(){return t})}catch(e){return Promise.reject(e)}},s.call=function(e,t){try{var n=r.generateMessageId(),o=this.internalEventPromise("res:"+n);return Promise.resolve(this.message(m.Request,{requestId:n,requestType:e,requestData:t})).then(function(){return Promise.resolve(o).then(function(e){var t=e.requestStatus,n=e.responseData;if(!t.result)throw new O(t.code,t.comment);return n})})}catch(e){return Promise.reject(e)}},s.callBatch=function(t,n){void 0===n&&(n={});try{var o=r.generateMessageId(),i=this.internalEventPromise("res:"+o);return Promise.resolve(this.message(m.RequestBatch,e({requestId:o,requests:t},n))).then(function(){return Promise.resolve(i).then(function(e){return e.results})})}catch(e){return Promise.reject(e)}},s.cleanup=function(){this.socket&&(this.socket.onopen=null,this.socket.onmessage=null,this.socket.onerror=null,this.socket.onclose=null,this.socket=void 0,this._identified=!1,this.internalListeners.removeAllListeners())},s.createConnection=function(e){try{var t=this,n=t.internalEventPromise("ConnectionOpened"),r=t.internalEventPromise("op:"+m.Hello);return t.socket=new w(e,t.protocol),t.socket.onopen=t.onOpen.bind(t),t.socket.onmessage=t.onMessage.bind(t),t.socket.onerror=t.onError.bind(t),t.socket.onclose=t.onClose.bind(t),Promise.resolve(n).then(function(){var e,n=null==(e=t.socket)?void 0:e.protocol;if(!n)throw new O(-1,"Server sent no subprotocol");if(n!==t.protocol)throw new O(-1,"Server sent an invalid subprotocol");return r})}catch(e){return Promise.reject(e)}},s.identify=function(t,n,r){var o,i,s=t.authentication,c=t.rpcVersion,a=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)t.indexOf(n=i[r])>=0||(o[n]=e[n]);return o}(t,S);void 0===r&&(r={});try{var u=this,f=e({rpcVersion:c},r);s&&n&&(f.authentication=(o=s.challenge,i=P.stringify(F(n+s.salt)),P.stringify(F(i+o))));var l=u.internalEventPromise("op:"+m.Identified);return Promise.resolve(u.message(m.Identify,f)).then(function(){return Promise.resolve(l).then(function(t){return u._identified=!0,u.emit("Identified",t),e({rpcVersion:c},a,t)})})}catch(e){return Promise.reject(e)}},s.message=function(e,t){try{var n=this;if(!n.socket)throw new Error("Not connected");if(!n.identified&&1!==e)throw new Error("Socket not identified");return Promise.resolve(n.encodeMessage({op:e,d:t})).then(function(e){n.socket.send(e)})}catch(e){return Promise.reject(e)}},s.internalEventPromise=function(e){try{var t=this;return Promise.resolve(new Promise(function(n){t.internalListeners.once(e,n)}))}catch(e){return Promise.reject(e)}},s.onOpen=function(e){x("socket.open"),this.emit("ConnectionOpened"),this.internalListeners.emit("ConnectionOpened",e)},s.onMessage=function(e){try{var t=this;return Promise.resolve(k(function(){return Promise.resolve(t.decodeMessage(e.data)).then(function(e){var n=e.op,r=e.d;if(x("socket.message: %d %j",n,r),void 0!==n&&void 0!==r)switch(n){case m.Event:return void t.emit(r.eventType,r.eventData);case m.RequestResponse:case m.RequestBatchResponse:return void t.internalListeners.emit("res:"+r.requestId,r);default:t.internalListeners.emit("op:"+n,r)}})},function(e){x("error handling message: %o",e)}))}catch(e){return Promise.reject(e)}},s.onError=function(e){x("socket.error: %o",e);var t=new O(-1,e.message);this.emit("ConnectionError",t),this.internalListeners.emit("ConnectionError",t)},s.onClose=function(e){x("socket.close: %s (%d)",e.reason,e.code);var t=new O(e.code,e.reason);this.emit("ConnectionClosed",t),this.internalListeners.emit("ConnectionClosed",t),this.cleanup()},o=r,(i=[{key:"identified",get:function(){return this._identified}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,"symbol"==typeof(o=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key))?o:String(o),r)}var o}(o.prototype,i),Object.defineProperty(o,"prototype",{writable:!1}),r}(v);j.requestCounter=1,"undefined"!=typeof exports&&Object.defineProperty(exports,"__esModule",{value:!0});var E=/*#__PURE__*/function(e){function n(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=e.call.apply(e,[this].concat(r))||this).protocol="obswebsocket.json",t}t(n,e);var r=n.prototype;return r.encodeMessage=function(e){try{return Promise.resolve(JSON.stringify(e))}catch(e){return Promise.reject(e)}},r.decodeMessage=function(e){try{return Promise.resolve(JSON.parse(e))}catch(e){return Promise.reject(e)}},n}(j),I=/*#__PURE__*/function(e){function n(){return e.apply(this,arguments)||this}return t(n,e),n}(E);return I.OBSWebSocketError=O,I.WebSocketOpCode=m,I.EventSubscription=g,I.RequestBatchExecutionType=C,I}();
</script>

<script>
document.addEventListener( 'DOMContentLoaded', function()
{
	const version = '1.0';

	console.log(`\n%cOBS WebSocket Tester`, 'color:#72a2ff;background:#191b26;font-size:1rem;padding:.75rem; padding: 1rem auto; border:2px solid #256eff; border-radius: 4px;font-weight: bold; font-family: monospace');

	console.log( `%cWelcome to the OBS WebSocket Connection Tester\n\n› Author: Wellington Estevo\n› Version: ${version}\n› Web: https://propz.de\n› Twitch: https://propz.de/twitch/\n\nLike it? I'd appreciate the support :)\n`, 'font-size:1rem;line-height:1.5;' );

	var obs;
	var obsData;
	const obsDataUrl = 'https://raw.githubusercontent.com/obsproject/obs-websocket/master/docs/generated/protocol.json';

	// Set title with version number
	document.title += ` - v${version}`;

	/**
	 * OBS Connection handler
	 */
	function connect()
	{
		event.preventDefault();

		const address = document.querySelector( '#address' ).value || 'localhost:4455';
		const password = document.querySelector( '#password' ).value;
		const eventSubscriptions = document.querySelector( '#subscribe-events' ).checked ? document.querySelector( '#event-subscriptions' ).value : undefined;

		const connectOptions = {};
		if ( eventSubscriptions )
		{
			connectOptions.eventSubscriptions = eventSubscriptions;
			console.log(eventSubscriptions);
		}

		obs = new OBSWebSocket();
		obs.connect( `ws://${address}`, password, connectOptions ).then(() =>
		{
			console.log( '› Connected to OBS' );
			show( '#request-form-wrapper, #response-wrapper, #button-disconnect' );
			hide( '#button-connect' );
			document.querySelector( '#status' ).innerHTML = 'Connected!';
			document.querySelector( '#status' ).classList.remove( 'status-error' );
			document.querySelector( '#status' ).classList.add( 'status-success' );
		})
		.catch( err =>
		{
			let errMsg = '<strong>Error connecting to OBS:</strong> ';
			if ( err == 'Error' )
			{
				errMsg += 'Is OBS running? Host + Port correct? Wrong password?';
			}
			else
			{
				err = err.toString().replace( 'Error:', '' );
				errMsg += err;
			}

			console.error( '› ' + errMsg);
			document.querySelector( '#status' ).innerHTML = errMsg;
			document.querySelector( '#status' ).classList.remove( 'status-success' );
			document.querySelector( '#status' ).classList.add( 'status-error' );
		});
	}

	/**
	 * OBS Disconnect handler
	 */
	function disconnect()
	{
		obs.disconnect().then(() =>
		{
			console.log( '› Disconnected from OBS' );
			document.querySelector( '#status' ).innerHTML = 'Disconnected';
			document.querySelector( '#status' ).classList.remove( 'status-error', 'status-success' );
			hide( '#request-form-wrapper,#response-wrapper,#button-disconnect' );
			show( '#button-connect' );
		});
	}

	/**
	 * Get current OBS data from github and setup elements.
	 */
	async function setupObsData()
	{
		const response = await fetch( obsDataUrl );
		obsData = await response.json();
		setupObsRequests( obsData );
		setupObsEvents( obsData );
	}

	/**
	 * Setup request type data
	 */
	function setupObsRequests(data)
	{
		const requests = data.requests;
		const requestTypeSelect = document.querySelector( '#request-type' );
		const requestFields = document.querySelector( '#request-fields' );

		requestTypeSelect.innerHTML = '<option value="">-</option>';

		// Categorize first ...
		const requestCategories = {};
		requests.forEach(request =>
		{
			if ( !requestCategories[ request.category ] ) requestCategories[ request.category ] = [];
			requestCategories[ request.category ].push( request );
		});

		// .. then fill dropdown ...
		Object.entries(requestCategories).forEach( ( [ category, categoryRequests ] ) =>
		{
			const optgroup = document.createElement( 'optgroup' );
			optgroup.label = category;
			categoryRequests.forEach(request =>
			{
				const option = document.createElement( 'option' );
				option.value = request.requestType;
				option.text = request.requestType;
				optgroup.appendChild( option );
			});
			requestTypeSelect.appendChild( optgroup );
		});

		// ... then handle changes.
		requestTypeSelect.addEventListener( 'change', function()
		{
			const selectedRequest = this.value;
			const requestDescription = document.querySelector( '#request-description' );

			// Reset all fields
			requestFields.innerHTML = '';
			requestDescription.innerHTML = '';
	
			// Return if nothing was chosen
			if ( !selectedRequest )
			{
				document.querySelector( '#button-sendrequest' ).disabled = true;
				return;
			}
			document.querySelector( '#button-sendrequest' ).disabled = false;

			const selectedRequestData = requests.find( request => request.requestType === selectedRequest );

			// Set field description
			requestDescription.textContent = selectedRequestData.description;

			// Don't go any further if we don't have any requestFields
			if ( !selectedRequestData.requestFields.length > 0 ) return;
		
			requestFields.innerHTML = '<h3>Request fields</h3>';

			// ... then loop and setup all param fields
			selectedRequestData.requestFields.forEach( field =>
			{
				// Field values
				const valueRequired = !field.valueOptional;
				const valueRequiredText = valueRequired ? 'required, ' : '';
				const valueType = field.valueType.toLowerCase();
				const valueName = field.valueName;

				// Dynamic input options
				let valueTypeText = valueType;
				let inputElement = 'input';
				let inputType = 'text';
				let inputClass = 'form-control';
				let inputWrapperClass = 'form-wrapper';
				let inputLabelClass = 'form-label';
				let inputHelpId = `${valueName}Helper`;

				switch (valueType)
				{
					case 'boolean':
						inputType = 'checkbox';
						inputClass = 'form-check-input';
						inputLabelClass = 'form-check-label';
						inputWrapperClass = 'form-check';
						break;
					case 'number':
						inputType = 'number';
						break;
					case 'object':
						inputElement = 'textarea';
						valueTypeText = 'JSON object';
						break;
				}

				// Create right description
				let valueDescription = `${valueName} (${valueRequiredText}${valueTypeText})`;
				if ( field.valueRestrictions )
					valueDescription = `${valueName} (${valueRequiredText}${valueTypeText}: ${field.valueRestrictions})`;

				// Set everything together
				const inputField = document.createElement( inputElement );
				inputField.name = valueName;
				inputField.id = valueName;
				inputField.placeholder = valueDescription;
				inputField.required = valueRequired;
				inputField.setAttribute( 'aria-describedby', inputHelpId );
				inputField.classList.add( inputClass );

				// Can't set type on textarea
				if ( inputElement !== 'textarea' )
					inputField.type = inputType;
				else
					inputField.rows = 3;

				const inputLabel = document.createElement( 'label' );
				inputLabel.textContent = valueDescription;
				inputLabel.classList.add( inputLabelClass );
				inputLabel.htmlFor = valueName;

				const inputDescription = document.createElement( 'div' );
				inputDescription.id = inputHelpId;
				inputDescription.textContent = field.valueDescription;
				inputDescription.classList.add( 'form-text' );

				const inputWrapper = document.createElement( 'div' );
				inputWrapper.classList.add( inputWrapperClass );

				// Different position for checkbox
				if ( inputWrapperClass === 'form-check' )
					inputWrapper.append( inputField, inputLabel, inputDescription );
				else
					inputWrapper.append( inputLabel, inputDescription, inputField );

				requestFields.appendChild( inputWrapper );
			});
		});
	}

	/**
	 * Setup event subscription data
	 */
	function setupObsEvents(data)
	{
		const events = data.events;
		const eventSubscriptionsSelect = document.querySelector( '#event-subscriptions' );

		const eventCategories = {};
		events.forEach( event =>
		{
			if ( !eventCategories[ event.eventSubscription ] )
				eventCategories[ event.eventSubscription ] = [];

			eventCategories[ event.eventSubscription ].push(event);
		});

		eventSubscriptionsSelect.innerHTML = '<option value="EventSubscription.All">All</option>';

		Object.entries(eventCategories).forEach( ( [ category, categoryEvents ] ) =>
		{
			const optgroup = document.createElement( 'optgroup' );
			optgroup.label = category;
			categoryEvents.forEach( event =>
			{
				const option = document.createElement( 'option' );
				option.value = event.eventSubscription;
				option.text = event.eventType;
				optgroup.appendChild( option );
			});
			eventSubscriptionsSelect.appendChild( optgroup );
		});
	}

	document.querySelector( '#button-connect' ).addEventListener( 'click', connect );
	document.querySelector( '#button-disconnect' ).addEventListener( 'click', disconnect );

	/**
	 * Send data to OBS
	 */
	document.querySelector( '#request-form' ).addEventListener( 'submit', function(event)
	{
		event.preventDefault();

		const requestData = {
			requestType: document.querySelector( '#request-type' ).value,
			requestData: {}
		};
		//const requestData = {};

		document.querySelectorAll( '#request-fields > div' ).forEach( fieldContainer =>
		{
			const input = fieldContainer.querySelector( 'input, textarea' );
			if ( input )
			{
				let val = input.value;
				if ( input.placeholder.toLowerCase().includes( 'object' ) ) val = JSON.parse( val );
				if ( input.placeholder.toLowerCase().includes( 'boolean' ) ) val = input.checked;
				if ( input.placeholder.toLowerCase().includes( 'number' ) ) val = parseInt( val );

				console.log( input, val );

				requestData.requestData[input.name] = val;
				//requestData[input.name] = val;
			}
		});
		console.log( '› Sending request:', requestData );
		document.querySelector( '#request-sent' ).textContent = "Sent data: \n" + JSON.stringify( requestData, null, "\t" );

		obs.callBatch( [ requestData ] ).then( response =>
		{
		//obs.call( document.querySelector( '#request-type' ).value, requestData ).then( response => {
			console.log( '› Response from OBS:', response );
			document.querySelector( '#response' ).textContent = JSON.stringify( response[0], null, "\t" );
		})
		.catch(err =>
		{
			console.error( '› Error sending request to OBS:', err);
			document.querySelector( '#response' ).textContent = err;
		});
	});

	/**
	 * Check if Events are needed
	 */
	document.querySelector( '#subscribe-events' ).addEventListener( 'change', function()
	{
		if ( this.checked )
			show( '#event-subscriptions-wrapper' );
		else
			hide( '#event-subscriptions-wrapper' );
	});

	/**
	 * Hide all given elements (by ID)
	 * 
	 * @param {string} elementsToHide - Element ID's separated by comma
	 * @returns {void}
	 */
	function hide( elementsToHide = '' )
	{
		if ( !elementsToHide ) return;
		let elements = elementsToHide.replace( ' ', '' ).split( ',' );
		elements.forEach( element =>
		{
			document.querySelector( element ).style.display = 'none';
		});
	}

	/**
	 * Show all given elements (by ID)
	 * 
	 * @param {string} elementsToShow - Element ID's separated by comma
	 * @returns {void}
	 */
	function show( elementsToShow )
	{
		if ( !elementsToShow ) return;
		let elements = elementsToShow.replace( ' ', '' ).split( ',' );
		elements.forEach( element =>
		{
			document.querySelector( element ).style.display = 'block';
		});
	}

	setupObsData();
});
</script>

</body>
</html>